<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Gestion des Employés</h2>
  </div>

  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Nom</th>
        <th>Identifiant</th>
        <th>Rôle</th>
        <th>Statut</th> <!-- NOUVELLE COLONNE -->
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let employe of employes">
        <td>{{ employe.nom }}</td>
        <td>{{ employe.identifiantConnexion }}</td>
        <td><span class="badge bg-secondary">{{ employe.role }}</span></td>
        <!-- AFFICHER LE STATUT -->
        <td>
          <span class="badge" [ngClass]="employe.status === 'ACTIF' ? 'bg-success' : 'bg-danger'">
            {{ employe.status }}
          </span>
        </td>
        <td>
          <!-- BOUTON D'ACTION DYNAMIQUE -->
          <button *ngIf="employe.status === 'ACTIF'" class="btn btn-sm btn-outline-warning me-2" (click)="toggleStatut(employe); $event.stopPropagation()">
            Suspendre
          </button>
          <button *ngIf="employe.status === 'SUSPENDU'" class="btn btn-sm btn-outline-success me-2" (click)="toggleStatut(employe); $event.stopPropagation()">
            Réactiver
          </button>
          <button class="btn btn-sm btn-danger" (click)="onDelete(employe); $event.stopPropagation()">
            Supprimer
          </button>
           <button class="btn btn-sm btn-info" (click)="voirDetails(employe); $event.stopPropagation()">Détails</button>
        </td>
      </tr>
    </tbody>
  </table>
  <hr>

  <!-- Formulaire pour ajouter un nouvel employé -->
  <hr>
  <h4>Ajouter un nouvel employé</h4>
  <div *ngIf="errorMessage" class="alert alert-danger mt-2">
    {{ errorMessage }}
  </div>
  <form (ngSubmit)="onSubmitNewEmploye()">
    <div class="row g-3 align-items-center">
      <div class="col-auto">
        <input type="text" class="form-control" [(ngModel)]="newEmploye.nom" name="nom" placeholder="Nom" required>
      </div>
      <div class="col-auto">
        <input type="text" class="form-control" [(ngModel)]="newEmploye.identifiantConnexion" name="identifiant" placeholder="Identifiant" required>
      </div>
      <div class="col-auto">
        <input type="password" class="form-control" [(ngModel)]="newEmploye.motDePasse" name="password" placeholder="Mot de passe" required>
      </div>
      <div class="col-auto">
        <select class="form-select" [(ngModel)]="newEmploye.role" name="role" required>
          <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
        </select>
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-success">Ajouter</button>
      </div>
    </div>
  </form>
</div>
